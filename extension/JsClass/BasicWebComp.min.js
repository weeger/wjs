// @require JsMethod > urlQueryParse
// @require JsMethod > urlQueryBuild
// @require JsMethod > isDomNode
// @require JsMethod > domAttributes
// @require JsMethod > cssAnimateCallback
// @require JsMethod > wjsIncludeExit
// @require JsMethod > isDomNode
// @require JsMethod > isPlainObject
// @require JsMethod > inheritLinage
// @require JsMethod > inheritObject
// @require JsMethod > wjsIncludeInit
// @require JsMethod > isPlainObject
// @require JsMethod > wjsHrefInit
// @require JsMethod > isPlainObject
(function(q){q.register("JsClass","BasicWebComp",{type:"WebComp",variables:{id:null,typeGlobal:"",optionsApplied:[],dom:null,domChildren:{},classLoadsNames:["fadeIn","loaded","fadeOut"],classLoads:{typeGlobal:!0}},options:{require:{defaults:!1,requiredWebComp:[],define:function(a){if(a){var b=this;b.wjs.use(a,function(){if(a.WebComp)for(var c=0,d;d=a.WebComp[c++];)b.options.require.requiredWebComp.push(b.wjs.loaders.WebComp.instance(d))})}},destroy:function(a){if(a)for(var b=this,c=0,d;d=b.options.require.requiredWebComp[c++];)d.exit(function(){b.wjs.destroy(a)})}},
urlHistory:{defaults:!1,unique:!1,define:function(a){if(a){a=this.loader.type;var b=wjs.urlQueryParse();b[a]=b[a]||[];this.options.urlHistory.unique?b[a]=this.type:-1===b[a].indexOf(this.type)&&b[a].push(this.type);wjs.window.history.replaceState(null,null,"?"+wjs.urlQueryBuild(b))}},destroy:function(){if(this.options.urlHistory.applied){var a=this.loader.type,b=this.wjs.urlQueryParse();b[a]&&(this.options.urlHistory.unique&&delete b[a],wjs.window.history.replaceState(null,null,"?"+wjs.urlQueryBuild(b)))}}},
includeDestroyQueued:{defaults:!1},dom:{defaults:!1,backup:{domCreated:null,className:"",attributes:{}},define:function(a,b){if(a=!0===a||"object"!==typeof a&&"string"===typeof b.html?"div":a){var c=0,d,e,f,h;d=this.options.dom.backup;var g,m,n=!1,l,p=(f=this.wjs.extRequire[this.loader.type])&&f[this.type]?f[this.type].CssLink:!1,k=this.classLoads;d.domCreated=!this.wjs.isDomNode(a);f=d.domCreated?this.wjs.document.createElement(a):a;d.attributes=this.wjs.extendObject({},this.wjs.domAttributes(f));
f.setAttribute("id",this.id);d.className=f.className;if(this.cssClasses)for(c;c<this.cssClasses.length;c++)f.classList.add(this.cssClasses[c]);this.dom=f;if(p)for(c=0;h=p[c++];)for(h=this.wjs.get("CssLink",h),d=0;l=h.sheet.rules[d++];)if(l.selectorText)for(e=0;g=this.classLoadsNames[e++];)if(m="."+g+"."+this.typeGlobal,-1!==l.selectorText.indexOf(g)||-1!==l.selectorText.indexOf(m))k[g]=void 0!==k[g]?k[g]:!0,n=!0;k.typeGlobal=void 0!==k.typeGlobal?k.typeGlobal:n;k.typeGlobal&&f.classList.add(this.typeGlobal);
this.domClassLoadAdd(this.typeGlobal);k.fadeIn?this.wjs.cssAnimateCallback(f,"fadeIn",this.options.dom.cssFadeInComplete):this.options.dom.cssFadeInComplete()}},cssFadeInComplete:function(){this.domClassLoadAdd("loaded")},destroy:function(a,b){if(this.dom){var c=this,d=c.classLoads;this.domClassLoadAdd("fadeOutChildren");wjs.wjsIncludeExit(c.dom,function(){d.fadeOut?c.wjs.cssAnimateCallback(c.dom,"fadeOut",function(){c.options.dom.cssFadeOutComplete(b)}):c.options.dom.cssFadeOutComplete(b)},this.includeDestroyQueued)}},
cssFadeOutComplete:function(a){for(var b=0,c=this.options.dom.backup,d=Object.keys,d=d(this.wjs.domAttributes(this.dom)).concat(d(c.attributes));b<d.length;b++)c.attributes[d[b]]?this.dom.setAttribute(d[b],c.attributes[d[b]]):this.dom.removeAttribute(d[b]);this.options.dom.backup.domCreated&&this.dom.parentNode.removeChild(this.dom);a&&a()}},domDestination:{defaults:null,define:function(a){a=a||this.wjs.document.body;"string"===typeof a&&(a=this.wjs.document.querySelector(a));a.appendChild(this.dom)}},
html:{defaults:!1,define:function(a,b){"string"===typeof a&&(this.optionApply("dom",b),this.domChildAdd("html","div"),this.domChildFill("html",a))}}},optionsDefault:{},__construct:function(a){var b=this.wjs,c=0,d,e,f=[],h={},g;g=b.loaders.WebComp;b.inheritLinage(this,"optionsDefault");d=this.variables=b.inheritObject(this,"variables");b.inheritLinage(this,"options");for(b.inheritLinage(this,"mixin");e=this.mixin[c++];)this.mixinProto(e);b.extendObject(h,this.optionsDefault);b.extendObject(h,a||{});
e=Object.keys(d);for(c=0;c<e.length;c++)this.variableInit(e[c],d[e[c]]);this.typeGlobal=b.inheritProperty(this,"type").join("-");null===this.id&&(this.id="w"+g.webCompCounter,g.webCompCounter+=1);g.webCompList[this.id]=this;b=this.options;e=Object.keys(b);for(c=0;c<e.length;c++)d=b[e[c]],(g=this.wjs.isPlainObject(d))&&!1===d.autoInit||f.push(e[c]),g&&d.required&&void 0===h[e[c]]&&void 0===d.defaults&&this.error('Missing option "'+e[c]+'" and no defaults value');this.optionApplyMultiple(f,h);this.init(a);
return h},__destruct:function(a){for(var b=0,c=Object.keys(this.options),d;d=c[b++];)d=this.options[d],this.wjs.isPlainObject(d)&&d.destroy&&d.destroy(d.applied,a);delete this.wjs.loaders.WebComp.webCompList[this.id];this.loader.instanceDestroy(this);delete this._inheritMethodBases;delete this._inheritMethodPass;Object.seal(this)},init:function(a){},exit:function(a){this.__destruct(a)},domChildAdd:function(a,b,c){this.domChildren[a]||(b=this.wjs.document.createElement(b||"div"),b.classList.add(a),
this.dom.appendChild(b),this.domChildren[a]=b);c&&this.domChildFill(a,c);return this.domChildGet(a)},domChildGet:function(a){return this.domChildren[a]},domChildFill:function(a,b){var c=this.domChildGet(a);c.innerHTML=b;this.wjs.wjsHrefInit(c);this.wjs.wjsIncludeInit(this.dom)},domClassLoadAdd:function(a){this.classLoads[a]&&this.dom.classList.add(a)},domClassLoadRemove:function(a){this.classLoads[a]&&this.dom.classList.remove(a)},variableInit:function(a,b){Object.defineProperty(this,a,{set:this.variableSetter(a),
get:this.variableGetter(a),enumerable:!0,configurable:!0});this[a]=b},variableSetter:function(a){return function(b){this.variableSetWrapper(a,b)}},variableGetter:function(a){return function(){return this.variableGetWrapper(a)}},variableSetWrapper:function(a,b){this.variables[a]=b},variableGetWrapper:function(a){return this.variables[a]},optionApplyMultiple:function(a,b){for(var c=0,d;d=a[c++];)this.optionApply(d,b)},optionApply:function(a,b){var c=this.options[a],d=this.wjs.isPlainObject(c),e;-1===
this.optionsApplied.indexOf(a)&&(this.optionsApplied.push(a),e=void 0!==b[a]?b[a]:d?c.defaults:c,c.applied=e,d&&c.define&&(e=c.define.apply(this,[e,b])),void 0!==e&&this.variableInit(a,e))}})})(WjsProto);