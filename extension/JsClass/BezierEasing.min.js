(function(g){g.register("JsClass","BezierEasing",{NEWTON_ITERATIONS:4,NEWTON_MIN_SLOPE:0.001,SUBDIVISION_PRECISION:1E-7,SUBDIVISION_MAX_ITERATIONS:10,kSplineTableSize:11,kSampleStepSize:0.1,float32ArraySupported:"Float32Array"in g.context,_precomputed:!1,__construct:function(a,b,c,d){if(4!==arguments.length)throw Error("BezierEasing requires 4 arguments.");for(var e=0;4>e;++e)if("number"!==typeof arguments[e]||isNaN(arguments[e])||!isFinite(arguments[e]))throw Error("BezierEasing arguments should be integers.");
if(0>a||1<a||0>c||1<c)throw Error("BezierEasing x values must be in [0, 1] range.");this.mSampleValues=this.float32ArraySupported?new Float32Array(this.kSplineTableSize):Array(this.kSplineTableSize);this.mX1=a;this.mY1=b;this.mX2=c;this.mY2=d;this.args=[this.mX1,this.mY1,this.mX2,this.mY2]},A:function(a,b){return 1-3*b+3*a},B:function(a,b){return 3*b-6*a},C:function(a){return 3*a},calcBezier:function(a,b,c){return((this.A(b,c)*a+this.B(b,c))*a+this.C(b))*a},getSlope:function(a,b,c){return 3*this.A(b,
c)*a*a+2*this.B(b,c)*a+this.C(b)},binarySubdivide:function(a,b,c,d,e){var h,f,g=0;do f=b+(c-b)/2,h=this.calcBezier(f,d,e)-a,0<h?c=f:b=f;while(Math.abs(h)>this.SUBDIVISION_PRECISION&&++g<this.SUBDIVISION_MAX_ITERATIONS);return f},newtonRaphsonIterate:function(a,b){for(var c=0;c<this.NEWTON_ITERATIONS;++c){var d=this.getSlope(b,this.mX1,this.mX2);if(0===d)break;var e=this.calcBezier(b,this.mX1,this.mX2)-a;b-=e/d}return b},calcSampleValues:function(){for(var a=0;a<this.kSplineTableSize;++a)this.mSampleValues[a]=
this.calcBezier(a*this.kSampleStepSize,this.mX1,this.mX2)},getTForX:function(a){for(var b=0,c=1,d=this.kSplineTableSize-1;c!==d&&this.mSampleValues[c]<=a;++c)b+=this.kSampleStepSize;--c;c=b+(a-this.mSampleValues[c])/(this.mSampleValues[c+1]-this.mSampleValues[c])*this.kSampleStepSize;d=this.getSlope(c,this.mX1,this.mX2);return d>=this.NEWTON_MIN_SLOPE?this.newtonRaphsonIterate(a,c):0===d?c:this.binarySubdivide(a,b,b+this.kSampleStepSize,this.mX1,this.mX2)},precompute:function(){this._precomputed=
!0;this.mX1===this.mY1&&this.mX2===this.mY2||this.calcSampleValues()},value:function(a){this._precomputed||this.precompute();return this.mX1===this.mY1&&this.mX2===this.mY2?a:0===a?0:1===a?1:this.calcBezier(this.getTForX(a),this.mY1,this.mY2)},getControlPoints:function(){return[{x:this.mX1,y:this.mY1},{x:this.mX2,y:this.mY2}]},toString:function(){return"BezierEasing("+this.args+")"},toCSS:function(){return"cubic-bezier("+this.args+")"}})})(W);
