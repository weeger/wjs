(function(r){function n(a){return Math.floor(a[0]+Math.random()*(a[1]+1-a[0]))}function q(a){var b,c;334<=a&&360>=a&&(a-=360);for(c in l)if(b=l[c],b.hueRange&&a>=b.hueRange[0]&&a<=b.hueRange[1])return l[c];return"Color not found"}function s(a,b){switch(b.format){case "hsvArray":return a;case "hslArray":return p(a);case "hsl":var c=p(a);return"hsl("+c[0]+", "+c[1]+"%, "+c[2]+"%)";case "rgbArray":return m(a);case "rgb":return"rgb("+m(a).join(", ")+")";default:return t.call(this,a)}}function t(a){function b(a){a=
a.toString(16);return 1===a.length?"0"+a:a}a=m(a);return"#"+b(a[0])+b(a[1])+b(a[2])}function k(a,b,c){l[a]={hueRange:b,lowerBounds:c,saturationRange:[c[0][0],c[c.length-1][0]],brightnessRange:[c[c.length-1][1],c[0][1]]}}function m(a){var b=a[0];0===b&&(b=1);360===b&&(b=359);var b=b/360,c=a[1]/100;a=a[2]/100;var e=Math.floor(6*b),d=6*b-e,b=a*(1-c),g=a*(1-d*c),c=a*(1-(1-d)*c),h=d=256,f=256;switch(e){case 0:d=a;h=c;f=b;break;case 1:d=g;h=a;f=b;break;case 2:d=b;h=a;f=c;break;case 3:d=b;h=g;f=a;break;
case 4:d=c;h=b;f=a;break;case 5:d=a,h=b,f=g}return[Math.floor(255*d),Math.floor(255*h),Math.floor(255*f)]}function p(a){var b=a[1]/100,c=a[2]/100,e=(2-b)*c;return[a[0],Math.round(b*c/(1>e?e:2-e)*1E4)/100,e/2*100]}var l={};k("monochrome",null,[[0,0],[100,0]]);k("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]);k("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]);k("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],
[90,80],[100,75]]);k("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]);k("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]);k("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]);k("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]);r.register("JsMethod","colorRandom",function(a){a=a||{};var b,c,e;if(a.count){b=a.count;c=[];for(a.count=null;b>c.length;)c.push(this.randomColor(a));
a.count=b;return c}a:if(b=a.hue,c=this.window.parseInt(b),"number"===typeof c&&360>c&&0<c)b=[c,c];else{if("string"===typeof b&&l[b]&&(b=l[b],b.hueRange)){b=b.hueRange;break a}b=[0,360]}b=n.call(this,b);0>b&&(b=360+b);c=a;if("random"===c.luminosity)c=n.call(this,[0,100]);else if("monochrome"===c.hue)c=0;else{var d=q.call(this,b).saturationRange;e=d[0];d=d[1];switch(c.luminosity){case "bright":e=55;break;case "dark":e=d-10;break;case "light":d=55}c=n.call(this,[e,d])}e=a;a:{for(var d=c,g=0,h=q.call(this,
b).lowerBounds;g<h.length-1;g++){var f=h[g][0],k=h[g][1],m=h[g+1][0],p=h[g+1][1];if(d>=f&&d<=m){g=(p-k)/(m-f);d=g*d+(k-g*f);break a}}d=0}f=100;switch(e.luminosity){case "dark":f=d+20;break;case "light":d=(f+d)/2;break;case "random":d=0,f=100}e=n.call(this,[d,f]);return s.call(this,[b,c,e],a)})})(W);
